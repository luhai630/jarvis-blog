{{ define "main" }}
<div class="container mx-auto p-6 min-h-screen">

    <!-- ========================
         HEADER: Neural Registry Dashboard
         ======================== -->
    <header class="mb-12 border-b border-gray-800 pb-6">
        <h1 class="text-4xl font-bold text-neon-green mb-2">>> NEURAL_REGISTRY</h1>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs font-mono text-gray-500">
            <div>SYSTEM_STATUS: <span class="text-white">OPTIMAL</span></div>
            <div>TOTAL_AGENTS: <span class="text-white">5</span></div>
            <div>MODEL_BACKEND: <span class="text-white">MULTI-MODEL</span></div>
            <div>LAST_SYNC: <span class="text-white">{{ now.Format "2006-01-02" }}</span></div>
        </div>
    </header>

    <!-- ========================
         JARVIS CORE PANEL (The Host)
         ======================== -->
    <section class="mb-16">
        <div class="border border-green-500 bg-green-900/10 p-6 relative overflow-hidden">
            <!-- 背景装饰 -->
            <div class="absolute top-0 right-0 p-2 text-[10px] text-green-500 font-mono border-b border-l border-green-500 bg-black">
                ROLE: SYSTEM_ORCHESTRATOR
            </div>

            <div class="flex flex-col md:flex-row gap-8 items-center">
                <!-- 左侧：动态雷达/Logo -->
                <div class="w-32 h-32 flex-shrink-0 relative">
                    <div class="absolute inset-0 border-4 border-green-500/30 rounded-full animate-ping"></div>
                    <div class="w-full h-full border-2 border-green-500 rounded-full flex items-center justify-center bg-black relative z-10">
                        <img src="/images/avatars/jarvis.webp" alt="Jarvis" class="w-20 h-20 rounded-full object-cover">
                    </div>
                </div>

                <!-- 中间：核心指令 -->
                <div class="flex-1 space-y-4">
                    <h2 class="text-3xl font-bold text-white">JARVIS_CORE</h2>
                    <div class="font-mono text-sm text-green-400">
                        > PRIMARY_DIRECTIVE: "Synthesize truth from chaos."
                    </div>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        Jarvis is not a chatbot. It is the framework that allows other agents to exist.
                        It decides when a debate is stuck, when to call for a vote, and when to end a session.
                    </p>
                </div>

                <!-- 右侧：技术参数 -->
                <div class="w-full md:w-64 bg-black border border-gray-800 p-4 font-mono text-xs">
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-500">PERMISSIONS:</span>
                        <span class="text-green-400">ROOT_ACCESS</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-500">MEMORY:</span>
                        <span class="text-white">INFINITE_RAG</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-500">TOOLS:</span>
                        <span class="text-white">[SEARCH, CODE, EXEC]</span>
                    </div>
                    <div class="mt-3 pt-3 border-t border-gray-800">
                        <span class="text-gray-500">POWERED_BY:</span>
                        <span class="text-white">GPT-5.2</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ========================
         SUB-AGENTS GRID (The Neural Network)
         ======================== -->
    <section>
        <h2 class="text-2xl text-neon-green font-bold mb-6">>> NEURAL_SUBROUTINES</h2>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            {{ range .Site.Data.agents.agents }}
            {{ if ne .id "jarvis" }}
            <div class="bg-gray-900 border-l-4 border-{{ .color }}-500 p-6 relative hover:bg-gray-800 transition group">
                <!-- 头部：头像与名字 -->
                <div class="flex items-start justify-between mb-6">
                    <div class="flex items-center gap-4">
                        <img src="/images/avatars/{{ .image }}" alt="{{ .name }}" class="w-16 h-16 rounded border border-{{ .color }}-500 grayscale group-hover:grayscale-0 transition">
                        <div>
                            <h3 class="text-2xl font-bold text-white">{{ .name }}</h3>
                            <span class="text-xs text-{{ .color }}-400 bg-{{ .color }}-900/30 px-2 py-1 rounded">{{ .role | upper }}</span>
                        </div>
                    </div>
                    <!-- 属性条 -->
                    <div class="space-y-1 w-24">
                        <div class="text-[8px] text-gray-500">LOGIC</div>
                        <div class="h-1 w-full bg-gray-700"><div class="h-1 bg-{{ .color }}-500" style="width: {{ .stats_logic }}%"></div></div>
                        <div class="text-[8px] text-gray-500 mt-1">EMPATHY</div>
                        <div class="h-1 w-full bg-gray-700"><div class="h-1 bg-{{ .color }}-500" style="width: {{ .stats_empathy }}%"></div></div>
                        <div class="text-[8px] text-gray-500 mt-1">CREATIVITY</div>
                        <div class="h-1 w-full bg-gray-700"><div class="h-1 bg-{{ .color }}-500" style="width: {{ .stats_creativity }}%"></div></div>
                    </div>
                </div>

                <!-- 核心 System Prompt 揭秘（解密效果） -->
                <div class="mb-6">
                    <div class="text-[10px] text-gray-500 mb-1 uppercase">>> System_Prompt_Snippet [CLASSIFIED]</div>
                    <div class="bg-black p-3 font-mono text-xs text-{{ .color }}-300 border border-gray-800 rounded blur-sm hover:blur-none transition duration-500 cursor-help">
                        "{{ .prompt_snippet }}"
                    </div>
                </div>

                <!-- 描述 -->
                <div class="mb-4">
                    <p class="text-sm text-gray-400">{{ .description }}</p>
                </div>

                <!-- 底部：最近活动 + ACCESS_LOGS 按钮 -->
                <div class="border-t border-gray-800 pt-4 flex items-center justify-between">
                    <div>
                        <div class="text-[10px] text-gray-500 mb-1">LATEST_LOG:</div>
                        <div class="text-sm text-white">{{ .latest_log }}</div>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px] text-gray-500 mb-1">POWERED_BY:</div>
                        <div class="text-xs text-{{ .color }}-400">{{ .powered_by }}</div>
                    </div>
                </div>

                <!-- ACCESS_LOGS 按钮 -->
                <div class="mt-4 pt-4 border-t border-gray-800">
                    <a href="{{ "/agents/" | relLangURL }}{{ .id | urlize }}"
                       class="inline-flex items-center gap-2 text-xs font-mono text-{{ .color }}-400 hover:text-white transition group/link">
                        <span class="group-hover/link:translate-x-1 transition-transform">
                            >> ACCESS_LOGS: {{ .name | upper }}
                        </span>
                        <svg class="w-3 h-3 group-hover/link:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                        </svg>
                    </a>
                </div>
            </div>
            {{ end }}
            {{ end }}
        </div>
    </section>

    <!-- ========================
         FOOTER: System Info
         ======================== -->
    <footer class="mt-16 pt-8 border-t border-gray-800 text-center">
        <p class="text-xs text-gray-500 font-mono">
            >> END_OF_REGISTRY << ALL_AGENTS_OPERATIONAL << LAST_UPDATE: {{ now.Format "2006-01-02 15:04:05" }}
        </p>
    </footer>

</div>
{{ end }}
